<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Checklist</title>
    <link href="https://d3moonnr9fkxfg.cloudfront.net/royal-canin.styles.prefix.min.critical.css?v=8-7-10" type="text/css" rel="stylesheet">
    <link href="https://d3moonnr9fkxfg.cloudfront.net/royal-canin.styles.prefix.min.css?v=8-7-10" type="text/css" rel="stylesheet">
    <link href="https://d3moonnr9fkxfg.cloudfront.net/royal-canin.styles.rc_type-regular.min.css?v=8-7-10" type="text/css" rel="stylesheet">
    <link href="https://d3moonnr9fkxfg.cloudfront.net/royal-canin.styles.rc_type-medium.min.css?v=8-7-10" type="text/css" rel="stylesheet">
    <link href="https://d3moonnr9fkxfg.cloudfront.net/royal-canin.styles.icons.min.css?v=8-7-10" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="./components/checklist.css">
</head>

<body class="rc-bg-colour--brand4">

    <div class="rc-checklist rc-padding--lg" data-checklist>
        <h2 class="rc-beta rc-margin-bottom--xl">Checklist</h2>
            <div class="rc-checklist-row rc-margin-bottom--lg">
                <label class="rc-checklist-row__label">
                    <input type="checkbox" class="rc-checklist-row__input form-checkbox">
                    <div class="rc-checklist-row__title-container">
                      <span class="rc-checklist-row__title rc-delta">Wake up in the morning</span>
                    </div>
                </label>
                <p class="rc-checklist-row__subtitle rc-body rc-margin-top--xs">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi non varius urna. Fusce efficitur urna sem, sed cursus nulla rhoncus in. Vivamus enim lacus, consequat a placerat id, commodo et sapien.</p>
            </div>
            <div class="rc-checklist-row rc-margin-bottom--lg">
                <label class="rc-checklist-row__label">
                    <input type="checkbox" class="rc-checklist-row__input form-checkbox">
                    <div class="rc-checklist-row__title-container">
                      <span class="rc-checklist-row__title rc-delta">Wake up in the morning 1</span>
                    </div>
                </label>
                <p class="rc-checklist-row__subtitle rc-body rc-margin-top--xs">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi non varius urna. Fusce efficitur urna sem, sed cursus nulla rhoncus in. Vivamus enim lacus, consequat a placerat id, commodo et sapien.</p>
            </div>
            <div class="rc-checklist-row rc-margin-bottom--lg">
                <label class="rc-checklist-row__label">
                    <input type="checkbox" class="rc-checklist-row__input form-checkbox">
                    <div class="rc-checklist-row__title-container">
                      <span class="rc-checklist-row__title rc-delta">Wake up in the morning 2</span>
                    </div>
                </label>
                <p class="rc-checklist-row__subtitle rc-body rc-margin-top--xs">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi non varius urna. Fusce efficitur urna sem, sed cursus nulla rhoncus in. Vivamus enim lacus, consequat a placerat id, commodo et sapien.</p>
            </div>
            <div class="rc-checklist-row rc-margin-bottom--lg">
                <label class="rc-checklist-row__label">
                    <input type="checkbox" class="rc-checklist-row__input form-checkbox">
                    <div class="rc-checklist-row__title-container">
                      <span class="rc-checklist-row__title rc-delta">Wake up in the morning 3</span>
                    </div>
                </label>
                <p class="rc-checklist-row__subtitle rc-body rc-margin-top--xs">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi non varius urna. Fusce efficitur urna sem, sed cursus nulla rhoncus in. Vivamus enim lacus, consequat a placerat id, commodo et sapien.</p>
            </div>
        </div>


    <script type="text/javascript">
        const checklist = document.querySelector('[data-checklist]');
        const key = `${window.location.pathname}-data-checklist`;
        let state = JSON.parse(localStorage.getItem(key)) || [];

        checklist.querySelectorAll('input[type="checkbox"]').forEach(input => {
            const title = input.parentNode.querySelector('span').innerText;
            if (state.includes(title)) {
                input.nextElementSibling.childNodes[1].classList.add('checked');
                input.parentNode.classList.add('checked');
                input.checked = true;
            }
            input.addEventListener('click', event => {
                if (state.includes(title)) {
                    event.target.nextElementSibling.childNodes[1].classList.remove('checked');
                    event.target.parentNode.classList.remove('checked');
                    state = state.filter(item => {
                      return item != title;
                    });
                  } else {
                    event.target.nextElementSibling.childNodes[1].classList.add('checked');
                    event.target.parentNode.classList.add('checked');
                    state.push(title);
                }

                localStorage.setItem(key, JSON.stringify(state));
            });
        });
    </script>

</body>

</html>
<html>

<head>
  <link href="https://d3moonnr9fkxfg.cloudfront.net/royal-canin.styles.prefix.min.critical.css?v=8-7-10" type="text/css"
    rel="stylesheet">
  <link href="https://d3moonnr9fkxfg.cloudfront.net/royal-canin.styles.prefix.min.css?v=8-7-10" type="text/css"
    rel="stylesheet">
  <link href="https://d3moonnr9fkxfg.cloudfront.net/royal-canin.styles.rc_type-regular.min.css?v=8-7-10" type="text/css"
    rel="stylesheet">
  <link href="https://d3moonnr9fkxfg.cloudfront.net/royal-canin.styles.rc_type-medium.min.css?v=8-7-10" type="text/css"
    rel="stylesheet">
  <link href="https://d3moonnr9fkxfg.cloudfront.net/royal-canin.styles.icons.min.css?v=8-7-10" type="text/css"
    rel="stylesheet">
  <link rel="stylesheet" href="build/tailwind.css">
  <link rel="stylesheet" href="./components/checklist.css">
</head>

<body>

  <div class="rc-layout-container max-w-4xl">
    <div class="rc-column">

      <h2 class="rc-alpha text-brand1">Checklist</h2>
      <div class="rc-checklist block" data-checklist>
        <div class="rc-checklist__row mt-1 mb-6">
          <label class="inline-flex items-center">
            <input type="checkbox" class="form-checkbox h-6 w-6">
            <span class="ml-3 text-lg text-brand1">This would be about a certain dog bed.</span>
          </label>
          <span class="block ml-10 rc-text-colour--iconography">This would be something about why it is important for you to get this bed.</span>
        </div>
        <div class="rc-checklist__row mt-1 mb-6">
          <label class="inline-flex items-center">
            <input type="checkbox" class="form-checkbox h-6 w-6">
            <span class="ml-3 text-lg text-brand1">This would be about a certain dog bed.</span>
          </label>
          <span class="block ml-10 rc-text-colour--iconography">This would be something about why it is important for you to get this bed.</span>
        </div>
        <div class="rc-checklist__row mt-1 mb-6">
          <label class="inline-flex items-center">
            <input type="checkbox" class="form-checkbox h-6 w-6">
            <span class="ml-3 text-lg text-brand1">This would be about a certain dog bed.</span>
          </label>
          <span class="block ml-10 rc-text-colour--iconography">This would be something about why it is important for you to get this bed.</span>
        </div>
      </div>

    </div>
  </div>

  <script type="text/javascript">
    const checklist = document.querySelector('[data-checklist]');
    const key = `${window.location.pathname}-data-checklist`;
    let state = JSON.parse(localStorage.getItem(key)) || [];

    checklist.querySelectorAll('input[type="checkbox"]').forEach(input => {
      const title = input.parentNode.querySelector('span').innerText;
      if (state.includes(title)) {
        input.parentNode.classList.add('checked');
        input.checked = true;
      }
      input.addEventListener('click', event => {
        if (state.includes(title)) {
          event.target.parentNode.classList.remove('checked');
          state = state.filter(item => {
            return item != title;
          });
        } else {
          event.target.parentNode.classList.add('checked');
          state.push(title);
        }

        localStorage.setItem(key, JSON.stringify(state));
      });
    });
  </script>

</body>

</html>